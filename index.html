<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>

  <link rel="stylesheet" type="text/css" href="css/styles.css" media="all">
</head>
<body>
<h2 class="title">What factors effect temperature in the world?</h2>
<image class="img" src="image/climate.jpg">
<h3>Nowadays, with the destruction of the environment, the climate environmrnt has also shown obvious changes. The greenhouse effect causes the temperature to rise, which seriouly affects the lives of humans and animals. The number of deaths from heat stroke is increasing around the world.
</h3>
<h3>This map shows how countries are affected by temperature change on a global scale. The higher the temperature rate, the more significant the temperature change in the country. As shown in the figure, the regions most affected by temperature are the Arctic and Antarctic, where rising temperatures lead to melting of glaciers.The other message is that in 1961 the countries that were most affected by temperature were in Europe and North America, and some of the developing countries that are now not as affected by temperature change. Here we will explore step by step what exactly is causing the temperature change.</h3>
<div id="choropleth_map"></div>
<script type="text/javascript">
  var spec2 = "choropleth_map.vg.json";
  vegaEmbed('#choropleth_map', spec2).then(function(result) {
  }).catch(console.error);
</script>
<br>
<hr>

<h3>This bar chart shows there are how many countries in different temperature rates in different years. Through drag the slider bar, 
  you can find that With the increase of time more and more countries are affected by the temperature seriously. In 1961, the highest temperature rate is around 5.7.
  However, the highest temperature rate is around 7.2 in 2019. In just a few decades, the temperature rates in many countries has nearly doubled.
</h3>
<div id="bar"></div>
<input id="density" type="range"   max="2019" min="1961"  oninput="OnInput(event)" onpropertychange="OnPropChanged(event)">
<h1>Drag the slider bar to display the chart</h1>
<script type="text/javascript">
  var Year = 'Y1961'
    var yourVlSpec = {
      "height": 400,
      "width": 800,
      "title": "How many countries are effected by temperature change in wordwide",
      "data": { "url": "https://raw.githubusercontent.com/HaochengZhao93/Fit3179HomeWork/main/Environment_Temperature_change_E_All_Data_NOFLAG.csv",
        "format": {
          "type": "csv"
        }
      },
      "transform": [
        {
          "filter":"datum."+Year},
        {
          "calculate": "parseInt(parseFloat(datum."+Year+")*10)/10",
          "as": "Year"
        }
      ],
      "mark": "bar",
      "encoding": {
        "x": {
          "field": "Year"
        },
        "y": {
          "field": "Area",
          "title": "count of country",
          "aggregate": "count"
        }
      }
    }
  function OnInput (event) {
    console.log(event.target.value);
    Year = "Y"+event.target.value
    yourVlSpec = {
      "height": 400,
      "width": 800,
      "title": "How many countries are effected by temperature change in wordwide",
      "data": { "url": "https://raw.githubusercontent.com/HaochengZhao93/Fit3179HomeWork/main/Environment_Temperature_change_E_All_Data_NOFLAG.csv",
        "format": {
          "type": "csv"
        }
      },
      "transform": [
        {
          "filter":"datum."+Year},
        {
          "calculate": "parseInt(parseFloat(datum."+Year+")*10)/10",
          "as": "Year"
        }
      ],
      "mark": "bar",
      "encoding": {
        "x": {
          "field": "Year",
          "title": Year,
        },
        "y": {
          "field": "Area",
          "title": "count of country",
          "aggregate": "count"
        }
      }
    }
    vegaEmbed('#bar', yourVlSpec).then(function(result) {
    }).catch(console.error);
  }
</script>
<br>
<hr>

<h3>
  <br>These two charts show the effect of carbon dioxide emission on temperature rates change.</br>
  <br>The bar chart shows the change in carbon emissions from 1990 to 2019 for five representative countries. We can easy to find that
  After 1990, developed countries began to pay attention to environmental issues and began to reduce carbon emissions. 
  On the other hand, developing countries have to sacrifice the environment to achieve good development, 
  so the carbon emissions of developing countries have continued to increase since 1990. For some of the more backward countries, 
  they didn't do much industrial development so their carbon emissions stayed flat.</br>
  
  <br>The line chart shows the trend of temperature rate from 1990 to 2000 for these five representative countries. Compare with bar charts,
  we can easy to find that as carbon emissions rise, so dose the temperature rate. This states that the temperature rate is changing in response to 
  changes in carbon emissions.</br>
</h3>
<div id="bars"></div>

<script type="text/javascript">
  var spec4 = "bars.vg.json";
  vegaEmbed('#bars', spec4).then(function(result) {
  }).catch(console.error);
</script>

<div id="line"></div>

<script type="text/javascript">
  var spec5 = "line.vg.json";
  vegaEmbed('#line', spec5).then(function(result) {
  }).catch(console.error);
</script>
<br>
<hr>

<h3> The bubble chart shows the population in 2020 for these five representative countries. From the chart we can know that China and India 
  have a very large population. The large population base directly contributes to the country's carbon emission base.
  Compare with other charts, we can easy to find that as population rise, so dose the carbon emissions. This states that the temperature rate is also changing in response to 
  changes in population.</h3>
<div id="bubble"></div>

<script type="text/javascript">
  var spec6 = "bubble.vg.json";
  vegaEmbed('#bubble', spec6).then(function(result) {
  }).catch(console.error);
</script>

</body>
</html>
